# 菜牌管理系統 - Web 版本

## 📋 系統概述

這是菜牌管理系統的 Web 版本，將原本的 tkinter 圖形介面改為 Flask 網頁應用程式。現在您可以透過瀏覽器來使用所有功能，無需安裝桌面應用程式。

## 🚀 快速開始

### 1. 安裝依賴套件

```bash
pip install -r requirements.txt
```

### 2. 配置資料庫

編輯 `module/config_sql.py` 檔案，設定您的 MySQL 資料庫連接參數：

```python
DB_CONFIG = {
    'host': 'localhost',        # 資料庫主機
    'user': 'root',            # 用戶名
    'password': '12345678',    # 密碼
    'database': 'db_mediatek_menu',  # 資料庫名稱
    'charset': 'utf8mb4'
}
```

### 3. 啟動應用程式

```bash
python main.py
```

或直接執行 Flask 應用：

```bash
python app.py
```

### 4. 訪問系統

應用程式啟動後，會自動開啟瀏覽器並訪問：
- **本地訪問**：http://localhost:5000
- **區域網路訪問**：http://[您的IP]:5000

## 📱 系統功能

### 檔案處理
- **資料清洗**：自動清理 Excel 檔案中的價格、日期和據點資訊
- **菜牌編號產生**：為菜牌自動產生唯一編號
- **CSV轉TXT**：轉換 CSV 檔案為帶 BOM 的 UTF-8 格式

### 資料庫管理
- **上傳資料庫**：批量上傳菜牌資料到 MySQL 資料庫
- **上傳英文名稱**：更新菜牌的英文翻譯
- **刪除重複資料**：清理資料庫中的重複記錄

### 下載功能
- **下載無英文菜單**：導出缺少英文名稱的菜牌清單
- **新菜牌/新餐廳**：按日期範圍導出新增的菜牌或餐廳
- **下載所有菜牌**：導出完整的菜牌資料庫

## 🔧 技術架構

### 前端技術
- **Bootstrap 5**：響應式 UI 框架
- **Font Awesome**：圖標庫
- **原生 JavaScript**：前端互動功能

### 後端技術
- **Flask**：Python Web 框架
- **pandas**：資料處理
- **pymysql**：MySQL 資料庫連接
- **openpyxl**：Excel 檔案處理

### 目錄結構
```
mediatek_m_card/
├── app.py                 # Flask 應用程式主檔案
├── main.py               # 啟動點
├── requirements.txt      # 依賴套件清單
├── templates/           # HTML 模板
│   ├── base.html
│   ├── index.html
│   ├── clean_excel.html
│   ├── generate_menu_codes.html
│   ├── upload_database.html
│   ├── upload_english.html
│   ├── database_functions.html
│   ├── new_menu_restaurant.html
│   └── convert_csv.html
├── static/              # 靜態檔案
│   ├── css/style.css    # 自定義樣式
│   └── js/app.js        # JavaScript 功能
├── module/              # 業務邏輯模組
│   ├── config_sql.py    # 資料庫配置
│   ├── web_functions.py # Web 版本功能
│   └── ...              # 其他模組
└── uploads/             # 檔案上傳目錄
```

## 📝 使用說明

### 檔案上傳
1. 選擇相應的功能頁面
2. 點擊「選擇檔案」按鈕
3. 選擇要處理的檔案（支援 Excel、CSV 格式）
4. 點擊處理按鈕開始執行
5. 處理完成後可下載結果檔案

### 資料庫操作
1. 確保資料庫連接正常
2. 上傳符合格式要求的 Excel 檔案
3. 系統會自動根據據點分類資料
4. 檢查處理結果並確認無誤

### 資料導出
1. 選擇相應的導出功能
2. 輸入必要的參數（如日期範圍）
3. 點擊導出按鈕
4. 系統生成檔案後自動下載

## ⚠️ 注意事項

### 檔案格式要求
- **Excel 檔案**：`.xlsx` 或 `.xls` 格式
- **CSV 檔案**：UTF-8 編碼，包含必要欄位
- **檔案大小**：單檔不超過 50MB

### 必要欄位
上傳資料庫時，Excel 檔案必須包含：
- 餐廳編號
- 餐廳名稱
- 餐點編號
- 菜牌編號
- 餐點名稱

### 資料庫要求
- MySQL 5.7 或更高版本
- 支援 UTF-8 字符集
- 建議定期備份資料

## 🔍 故障排除

### 常見問題

**1. 無法連接資料庫**
- 檢查 `module/config_sql.py` 中的連接參數
- 確認 MySQL 服務正在運行
- 檢查防火牆設定

**2. 檔案上傳失敗**
- 檢查檔案格式是否正確
- 確認檔案大小不超過限制
- 檢查磁碟空間是否充足

**3. 頁面無法顯示**
- 確認 Flask 應用程式正在運行
- 檢查端口 5000 是否被占用
- 清除瀏覽器快取

**4. 功能執行錯誤**
- 查看控制台錯誤訊息
- 檢查檔案格式和內容
- 確認資料庫表結構正確

### 日誌檢查
應用程式運行時會在控制台顯示詳細日誌，包括：
- 請求處理狀態
- 資料庫操作結果
- 錯誤詳細資訊

## 🔄 從桌面版升級

如果您之前使用的是 tkinter 桌面版本：

1. **保留現有檔案**：原有的模組檔案大部分可以繼續使用
2. **安裝新依賴**：執行 `pip install -r requirements.txt`
3. **測試功能**：建議先在測試環境中驗證所有功能
4. **資料備份**：升級前請備份重要資料

## 📞 技術支援

如果您在使用過程中遇到問題，請：

1. 檢查本文檔的故障排除部分
2. 查看控制台錯誤訊息
3. 確認系統環境符合要求
4. 聯繫技術支援團隊

---

**版本資訊**：Web 版本 1.0  
**更新日期**：2024年8月  
**相容性**：Python 3.7+, MySQL 5.7+, 現代瀏覽器
